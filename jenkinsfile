node {
   options {
    buildDiscarder(logRotator(numToKeepStr: '4', artifactNumToKeepStr: '4'))
  }


 agent {
  label "aws-build-container"

    stage('Clone sources') {
       git branch: 'main', credentialsId: 'admin_git_creds', url: 'https://github.com/sudir/yaml_deployer.git'
    }

    stage('Artifactory configuration') {

      sh "node --version"
     
    }

    stage('OS Check') {
       sh "cat /etc/*-release"
    }

    stage('Clean Workspace') {
        cleanWs()
    }
    
  }
}
